---
import '../sass/styles.scss';
import '../sass/animations.scss';
const { MainTitle, MainDescription } = Astro.props;
---
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content={Astro.generator} />
    <meta name="description" content={ MainDescription }>
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <title>{ MainTitle }</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel&family=Raleway&display=swap" rel="stylesheet">
    <link href='https://unpkg.com/aos@2.3.1/dist/aos.css' rel="stylesheet" crossorigin="anonymous" />
</head>
<body>
    <slot />

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <script is:inline src="https://unpkg.com/aos@2.3.1/dist/aos.js" crossorigin="anonymous"></script>
    <script is:inline>
        (() => {
            AOS.init({
                duration: 2000,
                ease: 'ease-in-out',
                offset: 100
            });

            const menuIcon = document.querySelector(`.menu-icon`);
            const megaMenu = document.querySelector(`#mega-menu`);
            const theLogo = document.querySelector(`.logo`);

            menuIcon.addEventListener(`click`, (event) => {
                if ( megaMenu.classList.contains(`visible`) ){
                    megaMenu.style.animation = `megaMenuOutAnimation forwards 1000ms ease-in-out`;
                    megaMenu.addEventListener(`animationend`, (event) => {
                        menuIcon.classList.remove(`icon-close`);
                        theLogo.style.opacity = '1';
                        megaMenu.classList.remove(`visible`);
                        megaMenu.removeAttribute(`style`);
                    }, {once: true});
                } else {
                    megaMenu.classList.add(`visible`);
                    menuIcon.classList.add(`icon-close`);
                    theLogo.style.opacity = '0';
                }
            });

            const elMenu = document.querySelector('header');
            const elCambiante = document.querySelector('.change-menu-color');

            elMenu.classList.add(`change-color`);
            window.addEventListener('scroll', () => {
                const rect1 = elMenu.getBoundingClientRect();
                const rect2 = elCambiante.getBoundingClientRect();

                if ( rect2.y > 0 ){
                    elMenu.classList.add(`change-color`);
                } else {
                    if ( rect1.x < rect2.x + rect2.width && rect1.x + rect1.width > rect2.x && rect1.y < rect2.y + rect2.height && rect1.y + rect1.height > rect2.y ) {
                        elMenu.classList.add('change-color');
                    } else {
                        elMenu.classList.remove(`change-color`);
                    }
                }
            });
        })();
    </script>
</body>
</html>
